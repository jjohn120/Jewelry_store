<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Manage Appointments</title>
    <link href="index.css" rel="stylesheet" type="text/css">
    <link href="Appointment.css" rel="stylesheet" type="text/css">
</head>
<body>

<header>
    <h1>Admin - Manage Appointments</h1>
</header>

<div class="container">
    <h2>Set Available Appointments</h2>
    <form id="admin-form">
        <label for="admin-date">Date</label>
        <input type="date" id="admin-date" required>
        <label for="admin-time">Time</label>
        <input type="time" id="admin-time" required>
        <button type="submit">Add Available Slot</button>
    </form>
    <h2>Confirm Appointments</h2>
    <div id="unconfirmed-appointments"></div>
    <h2>Available Appointments</h2>
    <div id="available-appointments"></div>
</div>

<footer>
    <p>&copy; 2024 Online Jewelry Store</p>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const adminForm = document.getElementById('admin-form');
        const availableAppointments = document.getElementById('available-appointments');
        const unconfirmedAppointments = document.getElementById('unconfirmed-appointments');

        function loadAppointments() {
            const appointments = JSON.parse(localStorage.getItem('availableAppointments') || '[]');
            availableAppointments.innerHTML = appointments.map(app => `
                <div>
                    ${app.date} at ${app.time}
                    <button onclick="confirmAppointment('${app.date}', '${app.time}')">Confirm</button>
                </div>
            `).join('');
        }

        function loadUnconfirmedAppointments() {
            const unconfirmed = JSON.parse(localStorage.getItem('unconfirmedAppointments') || '[]');
            unconfirmedAppointments.innerHTML = unconfirmed.map(app => `
                <div>
                    ${app.date} at ${app.time}
                    <button onclick="confirmBooking('${app.date}', '${app.time}')">Confirm Booking</button>
                </div>
            `).join('');
        }

        adminForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const date = document.getElementById('admin-date').value;
            const time = document.getElementById('admin-time').value;
            const appointments = JSON.parse(localStorage.getItem('availableAppointments') || '[]');
            appointments.push({ date, time });
            localStorage.setItem('availableAppointments', JSON.stringify(appointments));
            loadAppointments();
        });

        window.confirmAppointment = function(date, time) {
            let appointments = JSON.parse(localStorage.getItem('availableAppointments') || '[]');
            appointments = appointments.filter(app => app.date !== date || app.time !== time);
            localStorage.setItem('availableAppointments', JSON.stringify(appointments));
            loadAppointments();
        };

        window.confirmBooking = function(date, time) {
            let unconfirmed = JSON.parse(localStorage.getItem('unconfirmedAppointments') || '[]');
            unconfirmed = unconfirmed.filter(app => app.date !== date || app.time !== time);
            localStorage.setItem('unconfirmedAppointments', JSON.stringify(unconfirmed));
            loadUnconfirmedAppointments();
        };

        loadAppointments();
        loadUnconfirmedAppointments();
    });
</script>

</body>
</html>
